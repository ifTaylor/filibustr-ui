<section>
    <div class="max-w-3xl mx-auto p-4 space-y-4">
        <div class="flex items-center justify-between">
            <h2 class="text-2xl font-semibold text-primary">Articles</h2>
                <button
                        class="px-3 py-1 rounded-lg border border-primary/30 text-onSurface hover:bg-primary hover:text-onPrimary transition"
                        (click)="refresh()"
                >
                    Refresh
                </button>
        </div>

    @if (loading()) {
        <div class="animate-pulse rounded-2xl bg-surface border border-primary/10 p-4">
            <div class="h-4 w-32 bg-primary/10 rounded mb-3"></div>
            <div class="h-3 w-3/4 bg-primary/10 rounded mb-2"></div>
            <div class="h-3 w-2/3 bg-primary/10 rounded"></div>
        </div>
    }

    @if (error()) {
        <div class="rounded-lg bg-error/10 border border-error/30 text-onSurface p-3">
            {{ error() }}
        </div>
    }

    @if (!loading() && !error() && posts().length === 0) {
        <div class="text-onSurface italic">No posts yet â€” be the first to contribute!</div>
    }

    @for (post of posts(); track post.id) {
        <article class="rounded-2xl bg-surface shadow border border-primary/20 p-4 hover:shadow-md transition">
            <header class="flex items-center justify-between mb-2">
                <span class="font-medium text-onSurface">User #{{ post.authorId }}</span>
                <time class="text-sm text-onSurface/70">
                    {{ post.createdAt | date:'medium' }}
                </time>
            </header>

            <div class="prose max-w-none text-onSurface whitespace-pre-wrap">
                <div class="prose max-w-none text-onSurface" [innerHTML]="post.content | markdown"></div>
            </div>

            <footer class="flex gap-4 mt-3 text-sm">
                <button class="text-blueLight hover:text-blueLight/80 font-medium">Reply</button>
                <button class="text-accent hover:text-accent-light font-medium">Report</button>
            </footer>
        </article>
    }
</div>

<div class="w-full flex justify-center my-6">
        <div class="w-full max-w-[728px]">
            <app-ad-slot
                    adClient="ca-pub-5423870712802307"
                    adSlot="3718453696"
                    adFormat="fluid"
                    [maxWidth]="728"
                    [height]="250"
                    class="block"
            />
        </div>
    </div>
</section>
